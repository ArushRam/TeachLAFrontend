(this["webpackJsonpteachla-frontend"]=this["webpackJsonpteachla-frontend"]||[]).push([[0],{120:function(e,t,n){},130:function(e,t,n){},137:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(45),s=n.n(o),c=(n(82),n(83),n(18)),i=n.n(c),l=n(27),u=n(5),d=n(7),p=n(9),m=n(8),h=n(10),g=n(38),f=n(23),E=n(2),b=n.n(E),v=n(69),y=n.n(v),k=(n(85),function(e){return r.a.createElement("footer",{className:"footer"},r.a.createElement("a",{href:"https://github.com/uclaacm/TeachLAFrontend",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{className:"footer-image",src:y.a,alt:"Teach LA logo and link to GitHub Repository"})))}),O=(n(54),n(49)),w=n.n(O),S=n(70),N=n(42),M=function(e){var t=e.type,n=e.waiting,a=e.data,o=e.onChange;return r.a.createElement("div",null,r.a.createElement("div",{className:"login-form-input-header"},t),r.a.createElement("input",{className:"login-form-input",type:"Password"===t||"Confirm Password"===t?"password":"text",disabled:n,name:t,placeholder:"",value:a,onChange:function(e){return o(e.target.value)}}),r.a.createElement("br",null))},C=n(24),P=(n(41),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleEmailLogin=function(e){n.setState({waiting:!0,errorMsg:""}),e.preventDefault();var t=n.state.username+E.EMAIL_DOMAIN_NAME,a=w()(n.state.password).toString();t&&a?C.auth().signInWithEmailAndPassword(t,a).then((function(){})).catch((function(e){console.error(e);var t=e.message;switch(e.code){case"auth/invalid-email":t="Invalid username. Usernames must only have alphanumeric characters plus !@#$%.";break;case"auth/user-not-found":t="No account found for username.";break;case"auth/wrong-password":t="Invalid password provided.";break;case"auth/network-request-failed":t="Network error - check your internet connection.";break;case"auth/app-deleted":case"auth/app-not-authorized":case"auth/argument-error":case"auth/invalid-api-key":case"auth/operation-not-allowed":case"auth/requires-recent-login":case"auth/unauthorized-domain":t="App was not properly configured. Please contact administrator. Error: "+e.code;break;case"auth/invalid-user-token":case"auth/user-disabled":case"auth/user-token-expired":case"auth/web-storage-unsupported":t="Issue with user. Please contact administrator. Error: "+e.code;break;default:t="Failed to sign in: "+e.code}n.setState({errorMsg:t,waiting:!1})})):n.setState({waiting:!1,errorMsg:"Failed to reach Firebase login services"})},n.handleSocialLogin=function(e){n.setState({waiting:!0}),C.auth().signInWithPopup(n.props.provider).catch((function(e){this.setState({errorMsg:"Failed to use Facebook login provider",waiting:!1})}))},n.updateUsername=function(e){return n.setState({username:e})},n.updatePassword=function(e){return n.setState({password:e})},n.renderErrorMessage=function(e,t){return e?r.a.createElement("span",null,r.a.createElement("div",{className:"login-form-input-error"},e),t?r.a.createElement("br",null):null):r.a.createElement("br",null)},n.renderInputs=function(){return r.a.createElement("div",{className:"login-form-input-list"},r.a.createElement("div",null,r.a.createElement(M,{type:"Username",data:n.state.username,waiting:n.state.waiting,onChange:n.updateUsername}),r.a.createElement(M,{type:"Password",data:n.state.password,waiting:n.state.waiting,onChange:n.updatePassword})),n.renderErrorMessage(n.state.errorMsg))},n.renderAction=function(){return n.state.waiting?r.a.createElement("div",{className:"login-form-loader"},r.a.createElement(N.RingLoader,{color:"#857e8f",size:50,loading:!0})):r.a.createElement(S.a,{className:"login-form-button",size:"lg",type:"submit"},"Login")},n.state={username:"",password:"",errorMsg:"",waiting:!1},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"login-form-container"},r.a.createElement("form",{className:"login-form",onSubmit:this.handleEmailLogin},r.a.createElement("h1",null,"Welcome to ",r.a.createElement("span",{className:"force-no-wrap"},"<Teach LA>")),r.a.createElement("br",null),this.renderInputs(),this.renderAction(),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(f.b,{to:{pathname:"/createUser",state:{username:this.state.username,password:this.state.password}},className:"login-form-link"},"Don't have an account? Create one now!"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("details",null,r.a.createElement("summary",null,"Forgot your password?"),r.a.createElement("p",null,"Send us an email at ",r.a.createElement("a",{href:"mailto:acmteachla@gmail.com"},"acmteachla@gmail.com")," ",'with "Forgot Password" in the subject, and we\'ll do our best to help you out!'))))}}]),t}(r.a.Component)),L=n(50),T=n.n(L),A=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).renderMainContent=function(){return r.a.createElement("div",{className:"login-page-content",style:{backgroundImage:"url(".concat(T.a,")")}},r.a.createElement(P,{provider:n.props.provider}))},n.state={},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-page"},this.renderMainContent(),r.a.createElement(k,null))}}]),t}(r.a.Component),j=n(13),_=n(51);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach((function(t){Object(_.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x="LOAD_USER_DATA";function D(e,t){return{type:x,userData:R({},t,{uid:e})}}var U="CLEAR_USER_DATA";function H(){return{type:U}}var F="LOAD_FAILURE";function B(e){return{type:F,waiting:!1,message:e}}var W="SET_DISPLAY_NAME";var z="SET_MOST_RECENT_PROGRAM";function G(e){return{type:z,value:e}}var V="SET_PHOTO_NAME";var Y=Object(j.b)((function(e,t){return{loggedIn:e.userData}}),(function(e){return{loadUserData:function(t){e(D(t))},clearUserData:function(){e(H())},loadFailure:function(t){e(B(t))}}}))(A),K=n(72),q=(n(120),function(e){function t(e){var n;Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).updateSelectedState=function(e,t){if(n.props.allowMultipleSelected){var a=n.state.selected;if(t){var r=n.state.selected.indexOf(e);r>=0&&a.splice(r,1)}else a=n.state.selected.concat([e]);n.props.handleClick&&n.props.handleClick(a),n.setState({selected:a})}else n.props.handleClick&&n.props.handleClick(e),n.setState({selected:e})},n.renderOption=function(e,t){var a,o=e.display,s=e.value,c=(s=s||t)===n.state.selected||n.props.allowMultipleSelected&&n.state.selected.includes(s),i="radio-option"+(c?"-selected":""),l=0===t?"radio-left":t===n.props.options.length-1?"radio-right":"";return a=c?Object.assign({},n.props.optionStyle||{},n.props.selectedOptionStyle||{},n.props.selectedBgColor?{backgroundColor:n.props.selectedBgColor}:{},n.props.selectedColor?{color:n.props.selectedColor}:{}):Object.assign({},n.props.optionStyle||{},n.props.bgColor?{backgroundColor:n.props.bgColor}:{},n.props.color?{color:n.props.color}:{}),r.a.createElement("div",{className:i,onClick:function(){return n.updateSelectedState(s,c)},style:a,id:l,key:t},o)};var a=n.props.defaultSelected;return n.props.allowMultipleSelected&&(a=a||[]),n.state={selected:a},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.containerStyle,t=this.props.options||[];return r.a.createElement("div",{className:"radio-selector",style:e},t.map(this.renderOption))}}]),t}(r.a.Component)),J=function(e){var t=[];return e.isSmall||t.push({display:"Both",value:E.CODE_AND_OUTPUT}),t=t.concat([{display:"Code",value:E.CODE_ONLY},{display:"Output",value:E.OUTPUT_ONLY}]),r.a.createElement(q,{options:t,defaultSelected:e.viewMode,containerStyle:{height:"40px"},handleClick:e.updateViewMode})},X=function(e,t){return"<html> ".concat('\n    <head>\n        <style>html,body: {margin:0, width:100%}</style>\n        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/p5.min.js"><\/script>\n        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/addons/p5.dom.min.js"><\/script>\n        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.1/addons/p5.sound.min.js"><\/script>\n        <style>\n          #inner {\n            height:100px;\n            background-color:#222;\n            color: #DDD;\n            font-family: monospace;\n            word-wrap:break-word;\n            overflow:auto;\n            margin: 10px auto;\n            position:relative;\n            padding: 10px 35px 10px 10px;\n            width: 100%;\n            box-sizing: border-box;         /* For IE and modern versions of Chrome */\n            -moz-box-sizing: border-box;    /* For Firefox                          */\n            -webkit-box-sizing: border-box; /* For Safari                           */\n          }\n          #output { margin: 0px 10px; display: block; position: relative;}\n          #closeConsoleButton { position: fixed; top: 20px; right: 30px; color: #ddd;}\n        </style>\n    </head>\n  '," ").concat(function(e,t){return"\n    <body>\n      ".concat(t?'<div id="outer"><textarea id="inner"></textarea></div>':'<div id="outer" style="display:none;"><textarea id="inner"></textarea></div>',"\n      ").concat('\n    <script type="text/javascript">\n      if (typeof console  != "undefined")\n        if (typeof console.log != \'undefined\')\n          console.olog = console.log;\n        else\n          console.olog = function() {};\n\n      console.log = (message) => {\n        console.olog(message);\n        let a = document.getElementById("inner")\n        if(a){\n          // a.style.display = "block"\n          a.value = a.value + "> " + message + "\\n";\n          if(a.scrollTop >= (a.scrollHeight - a.offsetHeight) - a.offsetHeight){\n            a.scrollTop = a.scrollHeight\n          }\n        }\n      };\n\n      window.onerror = (err)=> {\n        let a = document.getElementById("outer")\n        if(a){\n          a.style.display = "block"\n        }\n        console.log("\\n\\nERROR: " + err + "\\n")\n      }\n\n      console.error = console.debug = console.info = console.log;\n\n      function closeConsole(){\n        var mypre = document.getElementById("inner");\n        mypre.style.display = "none"\n      }\n    <\/script>\n  ',"\n      ").concat(function(e){return'\n  <script type="text/javascript">\n    '.concat(e,"\n  <\/script>\n")}(e),"\n    </body>\n  ")}(e,t),"</html>")},Z=function(e,t){return"<html> ".concat('\n<head>\n  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"><\/script>\n  <script src="https://cdn.rawgit.com/skulpt/skulpt-dist/1.1.0/skulpt.min.js" type="text/javascript"><\/script>\n  <script src="https://cdn.rawgit.com/skulpt/skulpt-dist/1.1.0/skulpt-stdlib.js" type="text/javascript"><\/script>\n  <style> html, body { margin:0; background-color: #585166;}\n          #inner {\n            height:100px;\n            background-color:#222;\n            color: #DDD;\n            font-family: monospace;\n            word-wrap:break-word;\n            overflow:auto;\n            margin: 10px auto;\n            position:relative;\n            padding: 10px 35px 10px 10px;\n            width: 100%;\n            box-sizing: border-box;         /* For IE and modern versions of Chrome */\n            -moz-box-sizing: border-box;    /* For Firefox                          */\n            -webkit-box-sizing: border-box; /* For Safari                           */\n            resize: vertical;\n          }\n          #output { margin: 0px 10px; position: relative;}\n          #mycanvas { margin: 10px; }\n          #closeConsoleButton { position: fixed; top: 20px; right: 30px; color: #ddd;}\n          canvas { border: 1px solid black; }\n  </style>\n</head>\n'," ").concat(function(e,t){return'\n    <body onload="runit()">\n      '.concat(function(e){return'\n  <script type="text/javascript">\n    var received = false;\n    function outf(text) {\n        var mypre = document.getElementById("inner");\n        console.log(text)\n        if (text != "\\n") {\n          received = true\n        } else if (received == true) {\n          received = false\n        } else {\n          received = true\n        }\n        if(received){\n          mypre.value = mypre.value + "> " + text + "\\n";\n        }\n        if(mypre.scrollTop >= (mypre.scrollHeight - mypre.offsetHeight) - mypre.offsetHeight){\n          mypre.scrollTop = mypre.scrollHeight\n        }\n    }\n\n    function closeConsole(){\n      var mypre = document.getElementById("inner");\n      mypre.style.display = "none"\n    }\n\n    function builtinRead(x) {\n        if (Sk.builtinFiles === undefined || Sk.builtinFiles["files"][x] === undefined)\n                throw "File not found: \'" + x + "\'";\n        return Sk.builtinFiles["files"][x];\n    }\n\n    function runit() {\n        var prog = atob(\''.concat(e,'\');\n        // console.log(prog)\n        //if you want to debug, you can uncomment this console log to see the code being run\n        //console.log(prog)\n        var mypre = document.getElementById("output");\n        // mypre.innerHTML = \'<div id="inner"><div id="closeConsoleButton" onclick="closeConsole()" title="Hide Console">X</div></div>\';\n        mypre.innerHTML = \'<textarea id="inner" readonly></textarea>\';\n        Sk.pre = "output";\n        Sk.configure({output:outf, read:builtinRead, __future__: Sk.python3});\n        (Sk.TurtleGraphics || (Sk.TurtleGraphics = {})).target = \'mycanvas\';\n        var myPromise = Sk.misceval.asyncToPromise(function() {\n\n            return Sk.importMainWithBody("<stdin>", false, prog, true);\n        });\n        myPromise.then(function(mod) {\n            //console.log(\'success\');\n        },\n        function(err) {\n            console.log(err.toString());\n            let b = document.getElementById("output")\n            if(b){\n              console.log("output found")\n              b.style.display = "block"\n            }\n            let a = document.getElementById("inner")\n            a.value += \'\\nERROR: \' + err.toString() + "\\n"\n        });\n    }\n  <\/script>\n')}(e),"\n      ").concat(t?'<div id="output"> </div>':'<div id="output" style="display:none;"> </div>','\n      <div id="mycanvas"></div>\n    </body>\n  ')}(e,t)," </html>")},$=n(76),Q=function(e){var t=e.icon,n=e.text,a=e.isSmall,o=Object($.a)(e,["icon","text","isSmall"]);return r.a.createElement(S.a,o,t,!a&&r.a.createElement("span",{className:"viewport-aware-button-text"},"\xa0\xa0",n))},ee=n(12),te=n(14),ne=function(e){var t=e.panelOpen,n=e.togglePanel;return t?r.a.createElement("div",{className:"editor-expand-panel-arrow-hidden"}):r.a.createElement("div",{className:"editor-expand-panel-arrow",title:"Open Profile Panel",onClick:n},r.a.createElement(te.a,{icon:ee.a}))},ae="SCREEN_RESIZE";var re="TOGGLE_PANEL";function oe(){return{type:re}}var se="SET_PANEL";var ce=Object(j.b)((function(e){return{panelOpen:e.ui.panelOpen}}),(function(e){return{togglePanel:function(){return e(oe())}}}))(ne),ie=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).shouldComponentUpdate=function(e,t){return n.state.showConsole!==t.showConsole||(n.props.mostRecentProgram!==e.mostRecentProgram?(n.firstLoad=!0,!0):n.props.isSmall!==e.isSmall||(n.state.run!==t.run||n.state.counter!==t.counter||n.state.showConsole!==t.showConsole)&&(n.firstLoad=!1,!0))},n.reRenderOutput=function(){n.setState((function(e){return{counter:e.counter+1}}))},n.renderOpenPanelButton=function(){return n.props.viewMode===E.OUTPUT_ONLY&&r.a.createElement(ce,null)},n.renderIframe=function(e){return e||"[object Function]"!=={}.toString.call(e)?r.a.createElement("iframe",{id:n.state.counter+" "+n.state.run,key:n.state.counter+" "+n.state.run,className:"editor-output-iframe",style:{height:n.props.screenHeight-61+"px"},srcDoc:e(),src:"",title:"output-iframe",onLoad:function(e){}}):(console.log("Null src doc function found"),null)},n.renderOutput=function(){var e=n.props,t=e.language,a=e.runResult,r=n.state.showConsole;if(n.firstLoad)return null;if(!a||!a.length)return null;var o=function(){return a};switch(t){case E.PROCESSING:o=function(){return X(a,r)};break;case E.PYTHON:a=btoa(a),o=function(){return Z(a,r)};break;case E.JAVA:case E.JAVASCRIPT:case E.CPP:case E.HTML:}return n.renderIframe(o)},n.renderRadio=function(){return n.props.viewMode===E.OUTPUT_ONLY&&r.a.createElement("div",{style:{marginLeft:"auto"}},r.a.createElement(J,{viewMode:n.props.viewMode,updateViewMode:n.props.updateViewMode,isSmall:n.props.isSmall}))},n.toggleConsole=function(){n.setState((function(e){return{showConsole:!e.showConsole}}))},n.renderConsoleButton=function(){return r.a.createElement(S.a,{className:"mx-2",color:n.state.showConsole?"danger":"primary",onClick:n.toggleConsole,title:n.state.showConsole?"Hide Console":"Show Console",size:"lg"},r.a.createElement(te.a,{icon:ee.k}))},n.renderBanner=function(){return r.a.createElement("div",{className:"editor-output-banner"},n.renderOpenPanelButton(),r.a.createElement("div",{style:{flex:"1 1 auto"}}," ")," ",n.renderRadio(),n.renderConsoleButton(),r.a.createElement(Q,{className:"mx-2",color:"primary",size:"lg",onClick:n.runCode,isSmall:n.props.isSmall,icon:r.a.createElement(te.a,{icon:ee.h}),text:"Run"}))},n.runCode=function(){n.setState((function(e){return{run:e.run+1}}))},n.state={counter:0,run:0,showConsole:!0},n.firstLoad=!0,n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"editor-output"},this.renderBanner(),r.a.createElement("div",null,this.renderOutput()))}}]),t}(r.a.Component),le=Object(j.b)((function(e){var t=e.userData.mostRecentProgram;return{mostRecentProgram:t,runResult:e.programs.getIn([t,"code"]),language:e.programs.getIn([t,"language"]),screenHeight:e.ui.screenHeight,screenWidth:e.ui.screenWidth}}),(function(e){return{clearOutput:function(){}}}))(ie),ue=n(35),de=n.n(ue),pe=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,a,r,o,s,c,l,u,d=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:"",n=d.length>1&&void 0!==d[1]&&d[1],a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"".concat(b.a.SERVER_URL,"/getUserData/").concat(e).concat(t?"?programs=true":"")},r={method:"get",mode:"cors"},e.prev=4,e.next=7,fetch(a(t,n),r);case 7:return o=e.sent,e.next=10,o.json();case 10:return s=e.sent,c=s.ok,l=s.data,u=s.error,e.abrupt("return",{ok:c,data:l,error:u});case 17:return e.prev=17,e.t0=e.catch(4),e.abrupt("return",{ok:"false",error:"SERVER ERROR: Unable to get user data from server",err:e.t0});case 20:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(){return e.apply(this,arguments)}}(),me=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post",a="";try{Object.keys(e).length&&(a=JSON.stringify(e))}catch(o){return void console.log(o)}var r={method:n,headers:{"Content-Type":"application/json; charset=utf-8"},body:a};return fetch("".concat(b.a.SERVER_URL,"/").concat(t),r)},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n="updatePrograms/".concat(e);return me(t,n,"put")},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n="updateUserData/".concat(e);return me(t,n)},fe=function(e){return me(e,"createProgram")},Ee=function(e){return me(e,"deleteProgram")},be=n(148),ve=n(149),ye=n(150),ke=n(157),Oe=n(31),we=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).toggleHandler=function(e){n.setState({dropdownOpen:!e})},n.selectLanguage=function(e){var t=!0;n.props.dirty&&(t=window.confirm("Are you sure you want to change programs? You have unsaved changes")),n.props.onSelect&&t&&n.props.onSelect(e)},n.renderDropdownItems=function(){return n.props.dropdownItems.map((function(e){var t;switch(e.language){case"python":t=Oe.b;break;case"processing":t=ee.c;break;case"html":default:t=Oe.a}return r.a.createElement(be.a,{key:e.key,onClick:function(){return n.selectLanguage(e.key)}},r.a.createElement(te.a,{icon:t,fixedWidth:!0}),r.a.createElement("span",{style:{marginLeft:"10px"}},e.name))}))},n.state={dropdownOpen:n.props.defaultOpen||!1},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e,t=this;switch(this.props.currentLanguage){case"python":e=Oe.b;break;case"processing":e=ee.c;break;case"html":default:e=Oe.a}return r.a.createElement("div",{className:"editor-language-dropdown"},r.a.createElement(ve.a,{isOpen:this.state.dropdownOpen,toggle:function(){return t.toggleHandler(t.state.dropdownOpen)}},r.a.createElement(ye.a,{className:"btn-language-dropdown",color:"",caret:!0},r.a.createElement("div",{className:"editor-language-dropdown-closed-content"},r.a.createElement(te.a,{icon:e,fixedWidth:!0})," ",this.props.displayValue)),r.a.createElement(ke.a,null,this.renderDropdownItems())))}}]),t}(r.a.Component),Se=Object(j.b)((function(e){var t=e.userData.mostRecentProgram,n=e.programs.getIn([t,"language"],"python"),a=e.programs.getIn([t,"name"],t),r=e.programs.keySeq().map((function(t){return{name:e.programs.getIn([t,"name"],t),language:e.programs.getIn([t,"language"],"python"),key:t}}));return{dirty:e.programs.getIn([t,"dirty"],!1),dropdownItems:r,displayValue:a,currentLanguage:n}}),(function(e){return{onSelect:function(t){e(G(t))}}}))(we),Ne=null;"undefined"!==typeof window&&"undefined"!==typeof window.navigator&&(Ne=n(124).Controlled,n(64),n(125),n(128),n(129));var Me=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).componentWillUnmount=function(){window.removeEventListener("beforeunload",n.onLeave),window.removeEventListener("close",n.onLeave)},n.checkDirty=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.dirty){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,(t={})[n.props.mostRecentProgram]={code:n.props.code},e.next=7,he(n.props.uid,t);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),n.onLeave=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.props.dirty&&(t.returnValue=""),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setCodeMirrorInstance=function(e){n.setState({codeMirrorInstance:e})},n.updateCode=function(e,t,a){n.props.dirty||n.props.code===a||n.props.dirtyCode(n.props.mostRecentProgram),n.props.setProgramCode(n.props.mostRecentProgram,a)},n.setCurrentLine=function(e){var t=n.state,a=t.codeMirrorInstance,r=t.currentLine,o=e.getCursor().line;a&&(a.removeLineClass(r,"wrap","selected-line"),a.addLineClass(o,"wrap","selected-line")),n.setState({currentLine:o})},n.renderDropdown=function(){return r.a.createElement(Se,null)},n.renderBanner=function(){return r.a.createElement("div",{className:"code-section-banner"},r.a.createElement(ce,null),n.renderDropdown(),r.a.createElement("div",{style:{marginLeft:"auto",marginRight:".5rem"}},r.a.createElement(J,{viewMode:n.props.viewMode,updateViewMode:n.props.updateViewMode,isSmall:n.props.screenWidth<=E.EDITOR_WIDTH_BREAKPOINT})),r.a.createElement(Q,{className:"mx-2",color:"success",size:"lg",onClick:n.props.handleSave,isSmall:n.props.screenWidth<=E.EDITOR_WIDTH_BREAKPOINT,icon:r.a.createElement(te.a,{icon:ee.i}),text:n.props.saveText}),r.a.createElement(S.a,{className:"mx-2",color:"success",size:"lg",onClick:n.props.handleDownload},r.a.createElement(te.a,{icon:ee.d})))},n.state={codeMirrorInstance:null,currentLine:0},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.onLeave),window.addEventListener("close",this.onLeave)}},{key:"render",value:function(){var e=this,t={mode:E.CODEMIRROR_CONVERSIONS[this.props.language],theme:"material",lineNumbers:!0,lineWrapping:!0,indentWithTabs:!0};return r.a.createElement("div",{className:"code-section"},this.renderBanner(),r.a.createElement("div",{className:"text-editor-container",style:{height:this.props.screenHeight-61-20,minHeight:this.props.screenHeight-61-20,maxHeight:this.props.screenHeight-61-20}},r.a.createElement(Ne,{editorDidMount:function(t){t.refresh(),e.setCodeMirrorInstance(t)},value:this.props.code,lineWrapping:!0,indentWithTabs:!0,options:t,onCursor:function(t){e.setCurrentLine(t)},onBeforeChange:this.updateCode,onChange:this.updateCode})))}}]),t}(r.a.Component),Ce="SET_PROGRAM_CODE";var Pe="SET_PROGRAM_LANGUAGE";var Le="SET_PROGRAM_NAME";var Te="SET_PROGRAM_THUMBNAIL";var Ae="DELETE_PROGRAM";var je="LOAD_PROGRAMS";var _e="CLEAR_PROGRAMS";var Ie="SET_PROGRAM_DIRTY";function Re(e,t){return{type:Ie,program:e,value:t}}var xe="ADD_PROGRAM";function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Ue=Object(j.b)((function(e){var t=e.userData,n=t.uid,a=t.mostRecentProgram;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(n,!0).forEach((function(t){Object(_.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.programs.get(a,de.a.Map()).toJS(),{mostRecentProgram:a,uid:n})}),(function(e,t){return{setProgramCode:function(t,n){e(function(e,t){return{type:Ce,program:e,value:t}}(t,n))},dirtyCode:function(t){e(Re(t,!0))}}}))(Me),He=(n(130),n(151)),Fe=n(152),Be=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"sketch-box"},r.a.createElement(f.b,{className:"sketch-box-body",onClick:this.props.redirFunc,to:{pathname:"/editor"}},r.a.createElement("img",{alt:"User's sketch icon",src:"".concat("/TeachLAFrontend","/img/sketch-thumbnails/").concat(this.props.img,".svg"),className:"sketch-thumbnail mt-2"}),r.a.createElement("div",{className:"sketch-metadata"},r.a.createElement("b",{className:"sketch-name"},this.props.name),r.a.createElement(te.a,{className:"sketch-icon",icon:this.props.icon}))),r.a.createElement("hr",{className:"sketch-divider"}),r.a.createElement(He.a,{className:"sketch-box-body"},r.a.createElement(Fe.a,{className:"p-2 text-center",onClick:this.props.editFunc},r.a.createElement(te.a,{className:"fa-lg",icon:ee.e})),r.a.createElement("div",{className:"sketch-button-divider"}),r.a.createElement(Fe.a,{className:"p-2 text-center",onClick:this.props.downloadFunc},r.a.createElement(te.a,{className:"fa-lg",icon:ee.d})),r.a.createElement("div",{className:"sketch-button-divider"}),r.a.createElement(Fe.a,{className:"p-2 text-center",onClick:this.props.deleteFunc},r.a.createElement(te.a,{className:"fa-lg",icon:ee.m}))))}}]),t}(r.a.Component),We=n(32),ze=n.n(We),Ge=n(153),Ve=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).closeModal=function(){n.props.onClose&&"[object Function]"==={}.toString.call(n.props.onClose)&&n.props.onClose()},n.onDeleteSubmit=function(){var e={uid:n.props.uid,docID:n.props.sketchKey,name:n.props.sketchKey};try{Ee(e).then((function(e){return e.json()})).then((function(e){e.ok?(n.props.deleteProgram(n.props.sketchKey),n.closeModal()):n.setState({spinner:!1,error:e.error||"Failed to create sketch, please try again later"})})).catch((function(e){n.setState({spinner:!1,error:"Failed to create sketch, please try again later"}),console.log(e)}))}catch(t){console.log(t)}n.setState({spinner:!0,error:""})},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(ze.a,{isOpen:this.props.isOpen,onRequestClose:this.closeModal,className:"sketches-modal",ariaHideApp:!1},r.a.createElement(Ge.a,null,r.a.createElement("h2",{className:"text-center"},'Are you sure you want to delete "',this.props.sketchName,'"?'),r.a.createElement("hr",null),r.a.createElement(He.a,null,r.a.createElement(Fe.a,null,r.a.createElement(S.a,{color:"secondary",onClick:this.closeModal,size:"lg",block:!0},"No thanks!")),r.a.createElement(Fe.a,null,r.a.createElement(S.a,{color:"danger",onClick:this.onDeleteSubmit,size:"lg",block:!0},"Delete Forever!")))))}}]),t}(r.a.Component),Ye=Object(j.b)((function(e){return{uid:e.userData.uid}}),(function(e){return{deleteProgram:function(t,n){return e(function(e){return{type:Ae,program:e}}(t))}}}))(Ve),Ke=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).toggleHandler=function(e){n.setState({dropdownOpen:!e})},n.renderDropdownItems=function(){return n.props.dropdownItems.map((function(e){var t=e.display,a=e.value;return t&&t.length&&a&&a.length?r.a.createElement(be.a,{key:a,onClick:n.props.onSelect?function(){return n.props.onSelect({display:t,value:a})}:null},t):null}))},n.state={dropdownOpen:n.props.defaultOpen||!1},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return this.props.dropdownItems&&this.props.dropdownItems.length?r.a.createElement("div",{className:"sketches-language-dropdown"},r.a.createElement(ve.a,{isOpen:this.state.dropdownOpen,toggle:function(){return e.toggleHandler(e.state.dropdownOpen)}},r.a.createElement(ye.a,{color:"primary",size:"lg",caret:!0},r.a.createElement("div",{className:"sketches-language-dropdown-closed-content"},this.props.displayValue)),r.a.createElement(ke.a,null,this.renderDropdownItems()))):this.props.displayValue}}]),t}(r.a.Component),qe=n(15),Je=n(154),Xe=n(155),Ze=n(156),$e=(n(67),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).closeModal=function(){n.props.onClose&&"[object Function]"==={}.toString.call(n.props.onClose)&&n.props.onClose(),n.setState({next:!1,language:qe.LanguageDropdownDefault,name:"",thumbnail:-1,error:"",disableSubmit:!1})},n.setNext=function(e){n.setState({next:e,error:"",disableSubmit:!1})},n.onBack=function(){return n.setNext(!1)},n.badThumbnailInput=function(){return void 0===n.state.thumbnail||""===n.state.thumbnail||n.state.thumbnail>=qe.SketchThumbnailArray.length||n.state.thumbnail<0},n.badNameInput=function(){return n.state.name?n.state.name.length>15&&(n.setState({error:"Name must be 15 characters or less"}),!0):(n.setState({error:"Name is required"}),!0)},n.badLanguageInput=function(){if(!n.state.language)return n.setState({error:"Please select a language"}),!0;for(var e=!0,t=0;t<qe.LanguageDropdownValues.length;t++)if(n.state.language.display===qe.LanguageDropdownValues[t].display&&n.state.language.value===qe.LanguageDropdownValues[t].value){e=!1;break}return!!e&&(n.setState({error:"Invalid language selected"}),!0)},n.onFirstSubmit=function(e){e.preventDefault(),n.badNameInput()||n.badLanguageInput()||n.setNext(!0)},n.onSecondSubmit=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n.badThumbnailInput()){e.next=3;break}return e.abrupt("return");case 3:a={uid:n.props.uid,thumbnail:n.state.thumbnail,language:n.state.language.value,name:n.state.name,code:""};try{fe(a).then((function(e){return e.json()})).then((function(e){e.ok?(n.props.addProgram(e.data.key,e.data.programData||{}),n.props.setMostRecentProgram(e.data.key),n.setState({redirect:!0}),n.closeModal()):n.setState({disableSubmit:!1,error:e.error||"Failed to create sketch, please try again later"})})).catch((function(e){n.setState({disableSubmit:!1,error:"Failed to create sketch, please try again later"}),console.log(e)}))}catch(r){console.log(r)}n.setState({disableSubmit:!0,error:""});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.renderSecondModal=function(){var e=qe.SketchThumbnailArray.map((function(e,t){return r.a.createElement("figure",{className:"sketches-gallery-item",key:e,onClick:function(){return n.setState({thumbnail:t})}},r.a.createElement("img",{src:"".concat("/TeachLAFrontend","/img/sketch-thumbnails/").concat(e,".svg"),className:"sketches-gallery-img"+(n.state.thumbnail===t?"-selected":""),alt:"icon"}))})),t=-1!==n.state.thumbnail?r.a.createElement("img",{src:"".concat("/TeachLAFrontend","/img/sketch-thumbnails/").concat(qe.SketchThumbnailArray[n.state.thumbnail],".svg"),className:"sketches-modal-header-thumbnail",alt:"icon"}):null;return r.a.createElement(ze.a,{isOpen:n.props.isOpen,onRequestClose:n.closeModal,className:"sketches-image-modal",overlayClassName:"profile-image-overlay",ariaHideApp:!1},r.a.createElement(Ge.a,null,r.a.createElement("div",{className:"sketches-modal-header d-flex align-items-center"},r.a.createElement("h1",null,"Choose a thumbnail"),r.a.createElement("div",{className:"sketches-modal-header-thumbnail-container"},t)),r.a.createElement("hr",null),r.a.createElement("div",{className:"sketches-gallery"},e),r.a.createElement("br",null),r.a.createElement("div",{className:"text-center text-danger"},n.state.error||r.a.createElement("br",null)),r.a.createElement("hr",null),r.a.createElement(He.a,null,r.a.createElement(Fe.a,null,r.a.createElement(S.a,{color:"secondary",onClick:n.onBack,disabled:n.state.disableSubmit,size:"lg",block:!0},"Back")),r.a.createElement(Fe.a,null,r.a.createElement(S.a,{color:"success",onClick:n.onSecondSubmit,size:"lg",disabled:n.badThumbnailInput()||n.state.disableSubmit,block:!0},"Create")))))},n.renderFirstModal=function(){return r.a.createElement(ze.a,{isOpen:n.props.isOpen,onRequestClose:n.closeModal,className:"sketches-modal",overlayClassName:"profile-image-overlay",ariaHideApp:!1},r.a.createElement(Ge.a,null,r.a.createElement("h1",{className:"text-center"},"Create a Sketch"),r.a.createElement("hr",null),r.a.createElement(Je.a,{row:!0},r.a.createElement(Xe.a,{className:"text-right",for:"sketch-name",xs:4},"Name"),r.a.createElement(Fe.a,{xs:8},r.a.createElement(Ze.a,{onChange:function(e){return n.setState({name:e.target.value})},value:n.state.name,id:"sketch-name"}))),r.a.createElement("br",null),r.a.createElement(He.a,null,r.a.createElement(Fe.a,{xs:"4",className:"text-right"},"Language"),r.a.createElement(Fe.a,{xs:"8",className:"d-flex align-items-center"},r.a.createElement(Ke,{dropdownItems:qe.LanguageDropdownValues,onSelect:function(e){return n.setState({language:e})},displayValue:n.state.language.display||qe.LanguageDropdownDefault.display}))),r.a.createElement("br",null),r.a.createElement("div",{className:"text-center text-danger"},n.state.error||r.a.createElement("br",null)),r.a.createElement("hr",null),r.a.createElement(He.a,null,r.a.createElement(Fe.a,null,r.a.createElement(S.a,{color:"danger",onClick:n.closeModal,size:"lg",block:!0},"Cancel")),r.a.createElement(Fe.a,null,r.a.createElement(S.a,{color:"success",onClick:n.onFirstSubmit,size:"lg",block:!0},"Next")))))},n.state={language:qe.LanguageDropdownDefault,name:"",next:!1,thumbnail:-1,disableSubmit:!1,error:"",redirect:!1},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return this.state.redirect?r.a.createElement(g.a,{to:"/editor"}):this.state.next?this.renderSecondModal():this.renderFirstModal()}}]),t}(r.a.Component)),Qe=Object(j.b)((function(e){return{uid:e.userData.uid}}),(function(e){return{addProgram:function(t,n){return e(function(e,t){return{type:xe,program:e,data:t}}(t,n))},setMostRecentProgram:function(t){return e(G(t))}}}))($e),et=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).closeModal=function(){n.props.onClose&&"[object Function]"==={}.toString.call(n.props.onClose)&&n.props.onClose(),n.setState({newLanguage:-1,newName:-1,newThumbnail:-1,error:"",onThumbnails:!1,disableSubmit:!1})},n.badNameInput=function(){return-1!==n.state.newName&&(n.state.newName?n.state.newName.length>15&&(n.setState({error:"Name must be 15 characters or less"}),!0):(n.setState({error:"Name is required"}),!0))},n.badLanguageInput=function(){if(-1===n.state.newLanguage)return!1;if(!n.state.newLanguage)return n.setState({error:"Please select a language"}),!0;for(var e=!0,t=0;t<qe.LanguageDropdownValues.length;t++)if(n.state.newLanguage.display===qe.LanguageDropdownValues[t].display&&n.state.newLanguage.value===qe.LanguageDropdownValues[t].value){e=!1;break}return!!e&&(n.setState({error:"Invalid language selected"}),!0)},n.handleSubmitEdit=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n.badNameInput()&&!n.badLanguageInput()){e.next=3;break}return e.abrupt("return");case 3:if(a={},r=!1,-1!==n.state.newLanguage&&(a.language=n.state.newLanguage.value,r=!0),-1!==n.state.newName&&(a.name=n.state.newName,r=!0),-1!==n.state.newThumbnail&&(a.thumbnail=n.state.newThumbnail,r=!0),r){(o={})[n.props.sketchKey]=a;try{he(n.props.uid,o).then((function(e){return e.json()})).then((function(e){e.ok?(-1!==n.state.newLanguage&&n.props.setProgramLanguage(n.props.sketchKey,n.state.newLanguage.value),-1!==n.state.newName&&n.props.setProgramName(n.props.sketchKey,n.state.newName),-1!==n.state.newThumbnail&&n.props.setProgramThumbnail(n.props.sketchKey,n.state.newThumbnail),n.closeModal()):n.setState({disableSubmit:!1,error:e.error||"Failed to edit sketch, please try again later"})})).catch((function(e){n.setState({disableSubmit:!1,error:"Failed to edit sketch, please try again later"}),console.log(e)}))}catch(s){console.log(s)}n.setState({disableSubmit:!0,error:""})}else n.closeModal();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={newLanguage:-1,newName:-1,newThumbnail:-1,disableSubmit:!1,error:"",onThumbnails:!1},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"renderMainModal",value:function(){var e=this,t=r.a.createElement("img",{src:"".concat("/TeachLAFrontend","/img/sketch-thumbnails/").concat(-1!==this.state.newThumbnail?qe.SketchThumbnailArray[this.state.newThumbnail]:this.props.sketchImg,".svg"),className:"sketches-modal-header-thumbnail",alt:"icon"});return r.a.createElement(ze.a,{isOpen:this.props.isOpen,onRequestClose:this.closeModal,className:"sketches-modal",overlayClassName:"profile-image-overlay",ariaHideApp:!1},r.a.createElement(Ge.a,null,r.a.createElement("h2",{className:"text-center"},'Editing "',this.props.sketchName,'"'),r.a.createElement("hr",null),r.a.createElement(Je.a,{row:!0},r.a.createElement(Xe.a,{className:"text-right",for:"sketch-name",xs:4},"Name"),r.a.createElement(Fe.a,{xs:8},r.a.createElement(Ze.a,{onChange:function(t){return e.setState({newName:t.target.value})},value:-1!==this.state.newName?this.state.newName:this.props.sketchName,id:"sketch-name"}))),r.a.createElement("br",null),r.a.createElement(He.a,null,r.a.createElement(Fe.a,{xs:"4",className:"text-right"},"Language"),r.a.createElement(Fe.a,{xs:"8",className:"d-flex align-items-center"},r.a.createElement(Ke,{dropdownItems:qe.LanguageDropdownValues,onSelect:function(t){return e.setState({newLanguage:t})},displayValue:-1!==this.state.newLanguage?this.state.newLanguage.display:this.props.sketchLang}))),r.a.createElement("br",null),r.a.createElement(He.a,null,r.a.createElement(Fe.a,{xs:"4",className:"text-right"},r.a.createElement("div",{className:"sketches-modal-header-thumbnail-container",style:{display:"block",marginLeft:"auto",marginRight:"0"}},t)),r.a.createElement(Fe.a,{xs:"8",className:"d-flex align-items-center"},r.a.createElement(S.a,{color:"primary",size:"lg",onClick:function(){e.setState({onThumbnails:!0})}},"Change"))),r.a.createElement("br",null),r.a.createElement("div",{className:"text-center text-danger"},this.state.error||r.a.createElement("br",null)),r.a.createElement("hr",null),r.a.createElement(He.a,null,r.a.createElement(Fe.a,null,r.a.createElement(S.a,{color:"danger",onClick:this.closeModal,size:"lg",disabled:this.state.disableSubmit,block:!0},"Cancel")),r.a.createElement(Fe.a,null,r.a.createElement(S.a,{color:"success",onClick:this.handleSubmitEdit,size:"lg",disabled:this.state.disableSubmit,block:!0},"Confirm")))))}},{key:"renderThumbnailModal",value:function(){var e=this,t=qe.SketchThumbnailArray.map((function(t,n){return r.a.createElement("figure",{className:"sketches-gallery-item",key:t,onClick:function(){return e.setState({newThumbnail:n})}},r.a.createElement("img",{src:"".concat("/TeachLAFrontend","/img/sketch-thumbnails/").concat(t,".svg"),className:"sketches-gallery-img"+(e.state.newThumbnail===n?"-selected":""),alt:"icon"}))})),n=-1!==this.state.newThumbnail?r.a.createElement("img",{src:"".concat("/TeachLAFrontend","/img/sketch-thumbnails/").concat(qe.SketchThumbnailArray[this.state.newThumbnail],".svg"),className:"sketches-modal-header-thumbnail",alt:"icon"}):r.a.createElement("img",{src:"".concat("/TeachLAFrontend","/img/sketch-thumbnails/").concat(this.props.sketchImg,".svg"),className:"sketches-modal-header-thumbnail",alt:"icon"});return r.a.createElement(ze.a,{isOpen:this.props.isOpen,onRequestClose:this.closeModal,className:"sketches-modal",overlayClassName:"profile-image-overlay",ariaHideApp:!1},r.a.createElement("form",null,r.a.createElement("div",{className:"sketches-modal-header d-flex align-items-center"},r.a.createElement("h1",null,"Choose a thumbnail"),r.a.createElement("div",{className:"ml-4 sketches-modal-header-thumbnail-container"},n)),r.a.createElement("hr",null),r.a.createElement("div",{className:"sketches-gallery"},t),r.a.createElement("div",{style:{color:"red",textAlign:"center"}},this.state.error||r.a.createElement("br",null))),r.a.createElement("hr",null),r.a.createElement(S.a,{color:"secondary",onClick:function(){e.setState({onThumbnails:!1})},size:"lg",block:!0},"Back")," ")}},{key:"render",value:function(){return this.state.onThumbnails?this.renderThumbnailModal():this.renderMainModal()}}]),t}(r.a.Component),tt=Object(j.b)((function(e){return{uid:e.userData.uid}}),(function(e){return{setProgramLanguage:function(t,n){return e(function(e,t){return{type:Pe,program:e,value:t}}(t,n))},setProgramName:function(t,n){return e(function(e,t){return{type:Le,program:e,value:t}}(t,n))},setProgramThumbnail:function(t,n){return e(function(e,t){return{type:Te,program:e,value:t}}(t,n))}}}))(et),nt=(n(137),100),at=220,rt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).getRandomSketchThumbnail=function(){return qe.SketchThumbnailArray[Math.floor(Math.random()*qe.SketchThumbnailArray.length)]},n.downloadSketchCode=function(e,t,n){var a=".";switch(t){case"python":a+="py";break;case"processing":case"html":a+="html";break;default:a+="txt"}var r,o=document.createElement("a");r="processing"===t?new Blob([X(n,!0)],{type:"text/plain"}):new Blob([n],{type:"text/plain"}),o.href=URL.createObjectURL(r),o.download=e+a,document.body.appendChild(o),o.click()},n.setCreateSketchModalOpen=function(e){n.setState({createSketchModalOpen:e})},n.setConfirmDeleteModalOpen=function(e,t,a){n.setState({confirmDeleteModalOpen:e,selectedSketch:t,selectedKey:a})},n.setEditSketchModalOpen=function(e,t,a,r,o){n.setState({editSketchModalOpen:e,selectedSketch:t,selectedImg:a,selectedLang:r,selectedKey:o})},n.setProgram=function(e){n.props.setMostRecentProgram(e)},n.renderHeader=function(){return r.a.createElement("div",{className:"sketches-header"},r.a.createElement(ce,null),r.a.createElement("div",{className:"sketches-header-text"},"Sketches"),r.a.createElement(S.a,{className:"ml-auto mr-2",color:"success",size:"lg",onClick:function(){return n.setCreateSketchModalOpen(!0)}},r.a.createElement(te.a,{icon:ee.f})," Create Sketch"))},n.getThumbnailSrc=function(e){return void 0===e||""===e||e>=qe.SketchThumbnailArray.length||e<0?qe.SketchThumbnailArray[0]:qe.SketchThumbnailArray[e]},n.renderSketches=function(){var e=n.props.programs.concat([]);if(0===e.size)return r.a.createElement("div",null,r.a.createElement("div",{className:"no-sketches-container"},r.a.createElement("h2",null,"There's nothing here! Why don't you try creating a sketch?"),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement(S.a,{color:"success",size:"lg",onClick:function(){return n.setCreateSketchModalOpen(!0)}},"Create A Sketch"))));var t=[];e.sort((function(e,t){return e.name<t.name?-1:e.name===t.name?0:1})),e.forEach((function(e){var a,o,s=e.key,c=e.name,i=e.language,l=e.thumbnail,u=e.code;switch(i){case"python":a=Oe.b,o="Python";break;case"processing":a=ee.c,o="Processing";break;case"html":default:a=Oe.a,o="HTML"}t.push(r.a.createElement(Be,{img:n.getThumbnailSrc(l),icon:a,name:c,key:s,deleteFunc:function(){n.setConfirmDeleteModalOpen(!0,c,s)},downloadFunc:function(){n.downloadSketchCode(c,i,u)},editFunc:function(){n.setEditSketchModalOpen(!0,c,n.getThumbnailSrc(l),o,s)},redirFunc:function(){n.setProgram(s)}}))}));for(var a=Math.floor((n.props.calculatedWidth-nt)/at),o=[],s=t.length,c=0;c<s/a;c++)o.push(r.a.createElement("div",{className:"sketches-grid-row",key:c},t.splice(0,a)));return r.a.createElement("div",{className:"sketches-grid"},o)},n.renderConfirmDeleteModal=function(){return r.a.createElement(Ye,{isOpen:n.state.confirmDeleteModalOpen,onClose:function(){return n.setConfirmDeleteModalOpen(!1)},sketchName:n.state.selectedSketch,sketchKey:n.state.selectedKey})},n.renderCreateSketchModal=function(){return r.a.createElement(Qe,{isOpen:n.state.createSketchModalOpen,onClose:function(){return n.setCreateSketchModalOpen(!1)}})},n.renderEditSketchModal=function(){return r.a.createElement(tt,{isOpen:n.state.editSketchModalOpen,onClose:function(){return n.setEditSketchModalOpen(!1)},sketchName:n.state.selectedSketch,sketchImg:n.state.selectedImg,sketchLang:n.state.selectedLang,sketchKey:n.state.selectedKey})},n.renderContent=function(){return r.a.createElement(r.a.Fragment,null,n.renderHeader(),n.renderSketches(),n.renderCreateSketchModal(),n.renderConfirmDeleteModal(),n.renderEditSketchModal())},n.state={confirmDeleteModalOpen:!1,createSketchModalOpen:!1,editSketchModalOpen:!1,selectedSketch:"",selectedImg:"",selectedLang:"",selectedKey:""},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e={width:this.props.calculatedWidth,height:this.props.screenHeight};return r.a.createElement("div",{className:"sketches-container",style:e},this.renderContent())}}]),t}(r.a.Component),ot=Object(j.b)((function(e){var t=e.userData.mostRecentProgram,n=e.programs.keySeq().map((function(t){var n=e.programs.get(t,de.a.Map()).toJS();return n.key=t,n})),a=(e.ui.panelOpen?E.OPEN_PANEL_LEFT:E.CLOSED_PANEL_LEFT)+E.PANEL_SIZE;return{mostRecentProgram:t,programs:n,calculatedWidth:e.ui.screenWidth-(a||0),left:a,screenHeight:e.ui.screenHeight,panelOpen:e.ui.panelOpen}}),(function(e){return{setMostRecentProgram:function(t){return e(G(t))},togglePanel:function(){return e(oe())}}}))(rt),st=(n(138),n(139),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleOpenModal=function(){n.setState({showModal:!0,selectedImage:n.props.photoName})},n.handleCloseModal=function(){n.setState({selectedImage:"",showModal:!1})},n.handleEditNameClick=function(){n.setState((function(e){return{editingName:!0}}))},n.handleEditImageClick=function(){n.setState((function(e){return{showModal:!0}}))},n.onNameChange=function(e){n.setState({name:e.target.value})},n.checkInputs=function(){var e=n.state.name;return e.length<E.MINIMUM_DISPLAY_NAME_LENGTH||e.length>E.MAXIMUM_DISPLAY_NAME_LENGTH?(n.setState({displayNameMessage:"Display name must be between ".concat(E.MINIMUM_DISPLAY_NAME_LENGTH,"-").concat(E.MAXIMUM_DISPLAY_NAME_LENGTH," characters long")}),!0):!!e.match(/[^a-zA-Z0-9!@#$% ]/)&&(n.setState({displayNameMessage:"Only use upper case, lower case, numbers, spaces, and/or the following special characters !@#$%"}),!0)},n.onNameSubmit=function(e){return e.preventDefault(),n.checkInputs()?void n.setState({name:n.props.displayName,editingName:!1}):(n.props.setDisplayName(n.state.name),void n.setState({editingName:!1,displayNameMessage:""}))},n.onImageSubmit=function(){n.props.setPhotoName(n.state.selectedImage),n.handleCloseModal(),n.setState({selectedImage:""})},n.renderErrorMessage=function(e,t){return e?r.a.createElement("span",null,r.a.createElement("div",{className:"profile-input-error"},e)):t?r.a.createElement("br",null):null},n.renderPanelImage=function(){return r.a.createElement("div",{className:"panel-image-container",onMouseEnter:function(){return n.setState({imageIsHovering:!0})},onMouseLeave:function(){return n.setState({imageIsHovering:!1})}},r.a.createElement("img",{className:"panel-image",src:E.PHOTO_NAMES[n.props.photoName]||E.PHOTO_NAMES[E.DEFAULT_PHOTO_NAME],alt:"Your profile"}),n.state.imageIsHovering&&r.a.createElement("button",{className:"image-edit-button",onClick:n.handleOpenModal},r.a.createElement(te.a,{icon:ee.e})))},n.onImageClick=function(e){n.setState((function(t){return{selectedImage:e}}))},n.renderImageModal=function(){var e=Object.keys(E.PHOTO_NAMES).map((function(e){return r.a.createElement("figure",{className:"gallery-item",key:e,onClick:function(){return n.onImageClick(e)}},r.a.createElement("img",{src:E.PHOTO_NAMES[e],className:"gallery-img"+(n.state.selectedImage===e?"-selected":""),alt:"icon"}))}));return r.a.createElement(ze.a,{isOpen:n.state.showModal,onRequestClose:n.handleCloseModal,className:"profile-image-modal",overlayClassName:"profile-image-overlay",ariaHideApp:!1},r.a.createElement("div",{className:"gallery"},e),r.a.createElement("div",{className:"text-center"},r.a.createElement(S.a,{color:"success",size:"lg",onClick:n.onImageSubmit,id:"modal-change-image-button"},"Submit")))},n.renderName=function(){return n.state.editingName?r.a.createElement("form",{className:"panel-edit-container",onSubmit:n.onNameSubmit},r.a.createElement("input",{className:"panel-edit",placeholder:n.props.displayName,onChange:n.onNameChange,value:n.state.name,onBlur:n.onNameSubmit})):r.a.createElement("div",{className:"panel-name",onMouseEnter:function(){return n.setState({nameIsHovering:!0})},onMouseLeave:function(){return n.setState({nameIsHovering:!1})},onClick:n.handleEditNameClick},n.props.displayName||"Joe Bruin",n.state.nameIsHovering&&r.a.createElement("button",{className:"edit-icon-image",onClick:n.handleEditNameClick},r.a.createElement(te.a,{icon:ee.e})))},n.renderEditorButton=function(){return r.a.createElement(f.b,{to:{pathname:"/editor"},className:"panel-button btn btn-secondary btn-lg btn-block",key:"editor-button",id:"editor-button"},r.a.createElement(te.a,{icon:ee.g}),r.a.createElement("span",{className:"panel-button-text"},"Editor"))},n.renderSketchesButton=function(){return r.a.createElement(f.b,{to:{pathname:"/sketches"},className:"panel-button btn btn-secondary btn-lg btn-block",key:"sketches-button",id:"sketches-button"},r.a.createElement(te.a,{icon:ee.b}),r.a.createElement("span",{className:"panel-button-text"},"Sketches"))},n.renderSignOutButton=function(){return r.a.createElement(S.a,{className:"panel-button",key:"sign-out-button",id:"sign-out-button",size:"lg",block:!0,onClick:function(){return C.auth().signOut()}},r.a.createElement(te.a,{icon:ee.j}),r.a.createElement("span",{className:"panel-button-text"},"Log Out"))},n.renderButtons=function(){var e=[];switch(n.props.contentType){case"sketches":e.push(n.renderEditorButton());break;case"editor":e.push(n.renderSketchesButton())}return e.push(n.renderSignOutButton()),r.a.createElement("div",{className:"panel-buttons"},e)},n.renderContent=function(){return r.a.createElement("div",{className:"panel-content"},n.renderPanelImage(),n.renderImageModal(),n.renderName(),n.renderErrorMessage(n.state.displayNameMessage),n.renderButtons())},n.renderCollapseButton=function(){return r.a.createElement("div",{className:"panel-collapse-button",onClick:n.props.togglePanel},r.a.createElement(te.a,{icon:ee.l}))},n.state={nameIsHovering:!1,imageIsHovering:!1,editingName:!1,showModal:!1,name:n.props.displayName,selectedImage:"",displayNameMessage:""},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e={left:this.props.left,height:this.props.screenHeight,width:E.PANEL_SIZE};return r.a.createElement("div",{className:"panel",style:e},this.renderCollapseButton(),this.renderContent(),r.a.createElement(k,null))}}]),t}(r.a.Component)),ct=Object(j.b)((function(e,t){return{displayName:e.userData.displayName,uid:e.userData.uid,photoName:e.userData.photoName||E.DEFAULT_PHOTO_NAME,screenHeight:e.ui.screenHeight,left:e.ui.panelOpen?E.OPEN_PANEL_LEFT:E.CLOSED_PANEL_LEFT}}),(function(e,t){return{collectUserPhoto:function(){},setDisplayName:function(t){return e({type:W,value:t})},setPhotoName:function(t){return e({type:V,photoName:t})},togglePanel:function(){e(oe())}}}))(st),it=function e(){Object(u.a)(this,e)};it.download=function(e,t,n){var a=".";switch(t){case"python":a+="py";break;case"processing":case"html":a+="html";break;default:a+="txt"}var r,o=document.createElement("a");r="processing"===t?new Blob([X(n,!0)],{type:"text/plain"}):new Blob([n],{type:"text/plain"}),o.href=URL.createObjectURL(r),o.download=e+a,document.body.appendChild(o),o.click()};n(140),n(141),n(142),n(143),n(144);var lt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).resetSaveText=function(){n.setState({saveText:"Save"})},n.handleSave=function(e){if(n.props.dirty){n.setState({saveText:"Saving..."});var t={};t[n.props.mostRecentProgram]={code:n.props.code},he(n.props.uid,t).then((function(){n.setState({saveText:"Saved!"}),setTimeout(n.resetSaveText,3e3)})),n.props.cleanCode(n.props.mostRecentProgram)}},n.handleDownload=function(){it.download(n.props.name,n.props.language,n.props.code)},n.renderDropdown=function(){return r.a.createElement(Se,null)},n.renderSketchesPage=function(){return r.a.createElement(ot,null)},n.renderContent=function(){switch(n.props.contentType){case"sketches":return n.renderSketchesPage();case"editor":default:return n.renderEditor()}},n.renderCodeAndOutput=function(){return r.a.createElement(K.a,{resizerStyle:{height:"67px",borderLeft:"2px solid #333",borderRight:"2px solid #333",width:"10px"},pane1Style:n.state.pane1Style,onDragStarted:function(){return n.setState({pane1Style:{}})},onDragFinished:function(){return n.setState({pane1Style:{transition:"width .5s ease"}})},split:"vertical",minSize:.33*(n.props.panelOpen?n.props.screenWidth-E.PANEL_SIZE:n.props.screenWidth),maxSize:.75*(n.props.panelOpen?n.props.screenWidth-E.PANEL_SIZE:n.props.screenWidth),size:(n.props.panelOpen?n.props.screenWidth-E.PANEL_SIZE:n.props.screenWidth)/5*3,allowResize:!0},n.renderCode(),n.renderOutput())},n.updateViewMode=function(e){n.setState({viewMode:e})},n.renderCode=function(){return r.a.createElement(Ue,{key:n.props.mostRecentProgram,viewMode:n.state.viewMode,updateViewMode:n.updateViewMode,handleSave:n.handleSave,saveText:n.state.saveText,screenHeight:n.props.screenHeight,screenWidth:n.props.screenWidth,handleDownload:n.handleDownload})},n.renderOutput=function(){return r.a.createElement(le,{viewMode:n.state.viewMode,updateViewMode:n.updateViewMode,isSmall:n.props.screenWidth<=E.EDITOR_WIDTH_BREAKPOINT})},n.renderEditor=function(){var e={width:n.props.screenWidth-(n.props.left||0),height:n.props.screenHeight};switch(n.state.viewMode){case E.CODE_ONLY:return r.a.createElement("div",{style:e},n.renderCode());case E.OUTPUT_ONLY:return r.a.createElement("div",{style:e},n.renderOutput());default:return n.renderCodeAndOutput()}},n.state={saveText:"Save",viewMode:n.props.screenWidth<=E.EDITOR_WIDTH_BREAKPOINT?E.CODE_ONLY:E.CODE_AND_OUTPUT,redirect:0===n.props.listOfPrograms.length?"/sketches":"",pane1Style:{transition:"width .5s ease"}},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.screenWidth!==e.screenWidth&&this.props.screenWidth<=E.EDITOR_WIDTH_BREAKPOINT&&this.state.viewMode===E.CODE_AND_OUTPUT&&this.setState({viewMode:E.CODE_ONLY})}},{key:"render",value:function(){if(this.state.redirect)return r.a.createElement(g.a,{to:this.state.redirect});var e={left:this.props.left||0,width:this.props.screenWidth-(this.props.left||0),height:this.props.screenHeight};return r.a.createElement("div",{className:"main"},r.a.createElement(ct,{contentType:this.props.contentType}),r.a.createElement("div",{className:"editor",style:e},this.renderContent()))}}]),t}(r.a.Component),ut="CLEAR_OUTPUT";var dt="SET_RUN_RESULT";var pt="SET_OUTPUT_LANGAUGE";var mt="SET_OUTPUT";var ht=Object(j.b)((function(e){var t=e.userData.mostRecentProgram,n=e.programs.getIn([t,"code"],void 0),a=e.programs.getIn([t,"dirty"],!1),r=e.programs.getIn([t,"name"],"untitled"),o=e.programs.getIn([t,"language"],"txt"),s=[];return e.programs.keySeq().forEach((function(e){return s.push(e)})),{uid:e.userData.uid,mostRecentProgram:t,code:n,listOfPrograms:s,screenWidth:e.ui.screenWidth,screenHeight:e.ui.screenHeight,dirty:a,panelOpen:e.ui.panelOpen,left:(e.ui.panelOpen?E.OPEN_PANEL_LEFT:E.CLOSED_PANEL_LEFT)+E.PANEL_SIZE,name:r,language:o}}),(function(e){return{setMostRecentProgram:function(t){return e(G(t))},runCode:function(t,n){return e(function(e){var t=e.output;return t?{type:mt,runResult:t.code,language:t.language}:{type:"IGNORE"}}(t))},cleanCode:function(t){return e(Re(t,!1))},togglePanel:function(){return e(oe())}}}))(lt),gt=(n(145),function(e){return r.a.createElement("div",{className:"Loading"},r.a.createElement("div",{className:"Loading-title"},"Loading"),r.a.createElement(N.RingLoader,{color:"#171124",size:250,loading:!0}))}),ft=function(e){function t(e){var n;Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).checkInputs=function(){var e=n.state,t=e.username,a=e.password,r=e.confirmPassword,o=!0;return t.length<E.MINIMUM_USERNAME_LENGTH||t.length>E.MAXIMUM_USERNAME_LENGTH?(n.setState({usernameMessage:"Username must be between ".concat(E.MINIMUM_USERNAME_LENGTH,"-").concat(E.MAXIMUM_USERNAME_LENGTH," characters long")}),o=!1):t.match(/[^a-zA-Z0-9!@#$%]/)?(n.setState({usernameMessage:"Username must only use upper case and lower case letters, numbers, and/or the special characters !@#$%"}),o=!1):n.setState({usernameMessage:""}),a.length<E.MINIMUM_PASSWORD_LENGTH||a.length>E.MAXIMUM_PASSWORD_LENGTH?(n.setState({passwordMessage:"Password must be between ".concat(E.MINIMUM_PASSWORD_LENGTH,"-").concat(E.MAXIMUM_PASSWORD_LENGTH," characters long")}),o=!1):a.match(/[^a-zA-Z0-9!@#$%]/)?(n.setState({passwordMessage:"Password must only use upper case and lower case letters, numbers, and/or the special characters !@#$%"}),o=!1):a!==r?(n.setState({passwordMessage:"Password and Confirm Password don't match",password:"",confirmPassword:""}),o=!1):n.setState({passwordMessage:""}),o},n.submit=function(e){if(e.preventDefault(),n.setState({waiting:!0,errorMessage:"",usernameMessage:"",passwordMessage:""}),n.checkInputs()){var t=n.state.username+E.EMAIL_DOMAIN_NAME,a=w()(n.state.password).toString();C.auth().createUserWithEmailAndPassword(t,a).then((function(e){e.user})).catch((function(e){console.error(e);var t=e.message;switch(e.code){case"auth/invalid-email":t="Invalid username. Usernames must only have alphanumeric characters plus !@#$%.";break;case"auth/email-already-in-use":t="Username is taken; please use another one.";break;case"auth/user-not-found":t="No account found for username.";break;case"auth/wrong-password":t="Invalid password provided.";break;case"auth/network-request-failed":t="Network error - check your internet connection.";break;case"auth/app-deleted":case"auth/app-not-authorized":case"auth/argument-error":case"auth/invalid-api-key":case"auth/operation-not-allowed":case"auth/requires-recent-login":case"auth/unauthorized-domain":t="App was not properly configured. Please contact administrator. Error: "+e.code;break;case"auth/invalid-user-token":case"auth/user-disabled":case"auth/user-token-expired":case"auth/web-storage-unsupported":t="Issue with user. Please contact administrator. Error: "+e.code;break;default:t="Failed to create user: "+e.code}n.setState({waiting:!1,errorMessage:t||"Failed to create user."})})),n.setState({password:"",confirmPassword:""})}else n.setState({waiting:!1})},n.renderErrorMessage=function(e,t){return e?r.a.createElement("span",null,r.a.createElement("div",{className:"login-form-input-error"},e)):t?r.a.createElement("br",null):null},n.updateUsername=function(e){return n.setState({username:e})},n.updatePassword=function(e){return n.setState({password:e})},n.updateConfirmPassword=function(e){return n.setState({confirmPassword:e})},n.renderInputs=function(){return r.a.createElement("div",{className:"login-form-input-list"},r.a.createElement("div",null,r.a.createElement(M,{type:"Username",data:n.state.username,waiting:n.state.waiting,onChange:n.updateUsername}),r.a.createElement(M,{type:"Password",data:n.state.password,waiting:n.state.waiting,onChange:n.updatePassword}),r.a.createElement(M,{type:"Confirm Password",data:n.state.confirmPassword,waiting:n.state.waiting,onChange:n.updateConfirmPassword}),n.renderErrorMessage(n.state.usernameMessage),n.renderErrorMessage(n.state.passwordMessage),n.renderErrorMessage(n.state.errorMessage,!0)))},n.renderAction=function(){return n.state.waiting?r.a.createElement("div",{className:"login-form-loader"},r.a.createElement(N.RingLoader,{color:"#857e8f",size:50,loading:!0})):r.a.createElement(S.a,{className:"login-form-button",size:"lg",type:"submit"},"Create Account")},n.renderLink=function(){return r.a.createElement(f.b,{to:"/login",className:"login-form-link"},"Already have an account? Click here to login.")};var a=n.props.initialState;return n.state={username:a?a.username:"",password:a?a.password:"",confirmPassword:"",errorMessage:"",waiting:!1,usernameMessage:"",passwordMessage:""},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-form-container"},r.a.createElement("form",{className:"login-form",onSubmit:this.submit},r.a.createElement("h1",null,"Create a new account"),r.a.createElement("br",null),this.renderInputs(),this.renderAction(),r.a.createElement("br",null),r.a.createElement("br",null),this.renderLink()))}}]),t}(r.a.Component),Et=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-page-content",style:{backgroundImage:"url(".concat(T.a,")")}},r.a.createElement(ft,{initialState:this.props.initialState})),r.a.createElement(k,null))}}]),t}(r.a.Component),bt=(n(68),function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-container"},r.a.createElement("h2",null,"Uh oh, something went wrong!"),r.a.createElement("h1",null,"Error: ",this.props.errorMsg),r.a.createElement("br",null),r.a.createElement(S.a,{color:"primary",size:"lg",target:"_blank",href:"".concat(E.GH_REPO_NAME,"/issues")},"Let Us Know!"),"\xa0",r.a.createElement(f.b,{to:"/"},r.a.createElement(S.a,{color:"success",size:"lg"},"Back to safety")),"\xa0",this.props.isValidUser&&r.a.createElement(S.a,{color:"danger",size:"lg",onClick:function(){return C.auth().signOut()}},"Log Out"),r.a.createElement(k,null))}}]),t}(r.a.Component)),vt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-container"},r.a.createElement("span",null,"Error: 404"),r.a.createElement("h1",null,"Uh oh, page not found!"),r.a.createElement("br",null),r.a.createElement(f.b,{to:"/"},r.a.createElement(S.a,{color:"success",size:"lg"},"Back to safety")),r.a.createElement(k,null))}}]),t}(r.a.Component),yt=(n(146),new C.auth.EmailAuthProvider),kt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){C.auth().onAuthStateChanged(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.onAuthHandler(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),window.addEventListener("resize",n.handleResize,!0)},n.componentWillUnmount=function(){window.removeEventListener("resize",n.handleResize,!0)},n.handleResize=function(){n.props.screenResize(window.innerWidth,window.innerHeight)},n.onAuthHandler=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("checking auth"),!t){e.next=14;break}if(console.log("found user"),!(a=t.uid)){e.next=10;break}return e.next=7,n.props.loadUserData(a,n.showErrorPage);case 7:n.setState({checkedAuth:!0}),e.next=12;break;case 10:n.props.loadFailure("Failed to load user data..."),n.setState({checkedAuth:!0});case 12:e.next=17;break;case 14:console.log("no user found"),n.props.clearUserData(),n.setState({checkedAuth:!0});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showErrorPage=function(e){console.log(e),n.props.loadFailure(e)},n.renderHome=function(e){return e?r.a.createElement(g.a,{to:"/editor"}):r.a.createElement(g.a,{to:"/login"})},n.state={checkedAuth:!1},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;if(!this.state.checkedAuth)return r.a.createElement(gt,null);var t=this.props.uid;return r.a.createElement(f.a,{basename:E.ROUTER_BASE_NAME},r.a.createElement("div",{className:"App"},r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/",render:function(){return""!==e.props.errorMsg?r.a.createElement(bt,{errorMsg:e.props.errorMsg,isValidUser:t}):t?r.a.createElement(g.a,{to:"/editor"}):r.a.createElement(Y,{provider:yt})}}),r.a.createElement(g.b,{path:"/login",render:function(){return""!==e.props.errorMsg?r.a.createElement(bt,{errorMsg:e.props.errorMsg,isValidUser:t}):t?r.a.createElement(g.a,{to:"/editor"}):r.a.createElement(Y,{provider:yt})}}),r.a.createElement(g.b,{path:"/editor",render:function(){return""!==e.props.errorMsg?r.a.createElement(bt,{errorMsg:e.props.errorMsg,isValidUser:t}):t?r.a.createElement(ht,{contentType:"editor"}):r.a.createElement(g.a,{to:"/login"})}}),r.a.createElement(g.b,{path:"/createUser",render:function(n){var a=n.location;return""!==e.props.errorMsg?r.a.createElement(bt,{errorMsg:e.props.errorMsg,isValidUser:t}):t?r.a.createElement(g.a,{to:"/editor"}):r.a.createElement(Et,{initialState:a.state})}}),r.a.createElement(g.b,{path:"/sketches",render:function(){return""!==e.props.errorMsg?r.a.createElement(bt,{errorMsg:e.props.errorMsg,isValidUser:t}):t?r.a.createElement(ht,{contentType:"sketches"}):r.a.createElement(g.a,{to:"/login"})}}),r.a.createElement(g.b,{path:"/error",render:function(){return e.props.errorMsg?r.a.createElement(bt,{errorMsg:e.props.errorMsg,isValidUser:t}):e.renderHome(t)}}),r.a.createElement(g.b,{render:function(){return r.a.createElement(vt,null)}}))))}}]),t}(r.a.Component),Ot=Object(j.b)((function(e){return{uid:e.userData.uid,errorMsg:e.userData.error,screenWidth:e.ui.screenWidth,screenHeight:e.ui.screenHeight}}),(function(e){return{loadUserData:function(){var t=Object(l.a)(i.a.mark((function t(n,a){var r,o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe(n,!0);case 2:r=t.sent,o=r.ok,s=r.data,o&&s&&s.userData&&Object.keys(s.userData).length?(s.programs&&e((c=s.programs,{type:je,programs:c})),e(D(n,s.userData))):a("SERVER ERROR: Unable to get user data from server");case 6:case"end":return t.stop()}var c}),t)})));return function(e,n){return t.apply(this,arguments)}}(),clearUserData:function(){e(H()),e({type:_e})},loadFailure:function(t){e(B(t))},screenResize:function(t,n){return e(function(e,t){return{type:ae,width:e,height:t}}(t,n))}}}))(kt),wt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function St(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Nt=n(43),Mt={error:"",displayName:"",uid:"",mostRecentProgram:"",photoName:""};var Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object.assign({},e,t.userData);case U:return Mt;case F:return Object.assign({},e,{error:t.message});case W:var n=t.value;return ge(e.uid,{displayName:n}).then((function(e){})).catch((function(t){e.error=t,console.log(t)})),Object.assign({},e,{displayName:n});case V:var a=t.photoName;return ge(e.uid,{photoName:a}).then((function(e){})).catch((function(t){e.error=t,console.log(t)})),Object.assign({},e,{photoName:a});case z:return ge(e.uid,{mostRecentProgram:t.value}).then((function(e){})).catch((function(t){e.error=t,console.log(t)})),Object.assign({},e,{mostRecentProgram:t.value});default:return e}},Pt=de.a.Map();var Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return de.a.fromJS(t.programs);case Ce:return e.setIn([t.program,"code"],t.value);case Pe:return e.setIn([t.program,"language"],t.value);case Ie:return e.setIn([t.program,"dirty"],t.value);case Le:return e.setIn([t.program,"name"],t.value);case Te:return e.setIn([t.program,"thumbnail"],t.value);case xe:return e.set(t.program,de.a.fromJS(t.data));case Ae:return e.delete(t.program);case _e:return de.a.Map();default:return e}},Tt={runResult:"",language:E.PYTHON};var At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ut:return Tt;case dt:return Object.assign({},e,{runResult:t.value});case pt:return Object.assign({},e,{language:t.value});case mt:return Object.assign({},e,{runResult:t.runResult,language:t.language});default:return e}},jt={screenWidth:"object"===typeof window?window.innerWidth:null,screenHeight:"object"===typeof window?window.innerHeight:null,panelOpen:!1};var _t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object.assign({},e,{screenWidth:t.width,screenHeight:t.height});case re:return Object.assign({},e,{panelOpen:!e.panelOpen});case se:return Object.assign({},e,{panelOpen:t.value});default:return e}},It=Object(Nt.b)({userData:Ct,output:At,programs:Lt,ui:_t}),Rt=n(75);C.initializeApp(Rt.a);var xt=Object(Nt.c)(It,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(r.a.createElement(j.a,{store:xt},r.a.createElement(Ot,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/TeachLAFrontend",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/TeachLAFrontend","/service-worker.js");wt?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):St(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):St(e)}))}}()},15:function(e,t){e.exports={SketchThumbnailArray:["Ant","Badger","Bear","Beaver","Bird","Bug","Bull","Bumblebee","Butterfly","Cat","Caterpillar","Chicken","Clown Fish","Corgi","Cow","Crab","Deer","Dinosaur","Dog","Dolphin","Dragonfly","Duck","Elephant","Falcon","Fish","Fly","Frog","Giraffe","Gorilla","Grasshopper","Horse","Hummingbird","Insect","Kangaroo","Kiwi Bird","Ladybird","Leopard","Lion","Llama","Mite","Mosquito","Octopus","Panda","Prawn","Puffin Bird","Rabbit","Rhinoceros","Seahorse","Shark","Sheep","Snail","Spider","Starfish","Stork","Turtle","Unicorn","Whale","Wolf"],LanguageDropdownValues:[{display:"Python",value:"python"},{display:"Processing",value:"processing"},{display:"HTML",value:"html"}],LanguageDropdownDefault:{display:"Python",value:"python"}}},2:function(e,t,n){(function(t){var n={};["python","javascript","html","processing"].forEach((function(e){switch(e){case"python":return n[e]="python";case"javascript":return n[e]="javascript";case"html":return n[e]="htmlmixed";case"java":return n[e]="text/x-java";case"processing":return n[e]="javascript";case"c++":return n[e]="text/x-csrc";default:console.error("SUPPORTED LANGUAGE WITH NO MODE")}}));var a="/TeachLAFrontend",r={lightbulb:"".concat(a,"/img/icons/lightbulb.png"),orange:"".concat(a,"/img/icons/orange.png"),pear:"".concat(a,"/img/icons/pear.png"),apple:"".concat(a,"/img/icons/apple.png"),hotdog:"".concat(a,"/img/icons/hotdog.png"),icecream:"".concat(a,"/img/icons/icecream.png"),cloud:"".concat(a,"/img/icons/cloud.png"),earth:"".concat(a,"/img/icons/earth.png"),heart:"".concat(a,"/img/icons/heart.png")},o="http://localhost:8081";t&&Object({NODE_ENV:"production",PUBLIC_URL:"/TeachLAFrontend",REACT_APP_ANGERY_REACTS_SERVER_URL:"http://localhost:5000",REACT_APP_FS_PROJ:"prod",REACT_APP_SERVER_TYPE:"prod"})&&(o="https://teach-la-backend.herokuapp.com");e.exports={PYTHON:"python",JAVASCRIPT:"javascript",HTML:"html",JAVA:"java",PROCESSING:"processing",CPP:"c++",PHOTO_NAMES:r,DEFAULT_PHOTO_NAME:"icecream",GH_REPO_NAME:"https://github.com/uclaacm/TeachLAFrontend",ROUTER_BASE_NAME:"/TeachLAFrontend",SERVER_URL:o,MINIMUM_USERNAME_LENGTH:6,MINIMUM_PASSWORD_LENGTH:6,MINIMUM_DISPLAY_NAME_LENGTH:1,MAXIMUM_USERNAME_LENGTH:20,MAXIMUM_PASSWORD_LENGTH:20,MAXIMUM_DISPLAY_NAME_LENGTH:25,DEFAULT_MODE:"python",DEFAULT_LANG:"python",RING_LOADER_SIZE:50,PANEL_SIZE:250,CLOSED_PANEL_LEFT:-250,OPEN_PANEL_LEFT:0,CODEMIRROR_CONVERSIONS:n,CODE_AND_OUTPUT:0,CODE_ONLY:1,OUTPUT_ONLY:2,EDITOR_WIDTH_BREAKPOINT:1e3,EMAIL_DOMAIN_NAME:"@fake.com"}}).call(this,n(53))},50:function(e,t,n){e.exports=n.p+"static/media/blueguy.ade51e63.png"},54:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){e.exports=n.p+"static/media/tla-logo.96efe073.svg"},75:function(e,t,n){"use strict";(function(e){var a=n(24),r=(n(41),new a.auth.FacebookAuthProvider,{apiKey:"AIzaSyD6a3Br7b52N2c6MjZTu1UU0ssf3ZwbfoA",authDomain:"tla-editor-backend-staging.firebaseapp.com",databaseURL:"https://tla-editor-backend-staging.firebaseio.com",projectId:"tla-editor-backend-staging",storageBucket:"tla-editor-backend-staging.appspot.com",messagingSenderId:"665461655548",appId:"1:665461655548:web:146e120e8b12f433429479"});e&&Object({NODE_ENV:"production",PUBLIC_URL:"/TeachLAFrontend",REACT_APP_ANGERY_REACTS_SERVER_URL:"http://localhost:5000",REACT_APP_FS_PROJ:"prod",REACT_APP_SERVER_TYPE:"prod"})&&(r={apiKey:"AIzaSyBfGWPbFcqH2HLc40B1yCY12B9F0_PO8SM",authDomain:"teachlacodeplatform-production.firebaseapp.com",databaseURL:"https://teachlacodeplatform-production.firebaseio.com",projectId:"teachlacodeplatform-production",storageBucket:"teachlacodeplatform-production.appspot.com",messagingSenderId:"165628144896"}),t.a=r}).call(this,n(53))},77:function(e,t,n){e.exports=n(147)},83:function(e,t,n){},85:function(e,t,n){}},[[77,1,2]]]);
//# sourceMappingURL=main.a03e26f3.chunk.js.map